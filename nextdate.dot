digraph nextdate {
    ranksep=0.1
    graph [rankdir = "TB"];
    node  [fontsize=16,fixedsize=true,width=0.7,shape=circle];

    Start [fontcolor="black", fillcolor="lightgray", style=filled]; 
    End   [fontcolor="black", fillcolor="lightgray", style=filled]; 
    Err   [fontcolor="red", fillcolor="lightgray", style=filled]; 

    Start -> 29;

    //Restrictions that the year must have the following invariant: 1801 <= year <= 2021
    29 -> 30 [label = "T" color="blue"];
        30 -> Err;

    //these variables will hold the proper values for the nextDate's day, month, and year values, respectively
    29 -> "33~35" -> 38;

    //Is this month with 31 days?
    38 -> 40 [label = "T" color="blue"];    // T
        40 -> 41 [label = "T" color="blue"];    // F
            41 -> 103;
        40 -> "43~44" [label = "F" color="red"];    // F
            "43~44" -> 103;

    //is this month a month with 30 days?
    38 -> 48 [label = "F" color="red"];
    48 -> 50 [label = "T" color="blue"];
        50 -> 51 [label = "T" color="blue"];
            51 -> 103;
        50 -> 53 [label = "F" color="red"];
            53 -> "54~55" [label = "T" color="blue"];
                "54~55" -> 103;
            53 -> 58 [label = "F" color="red"];
                58 -> Err;

    //is this month December?
    48 -> 62 [label = "F" color="red"];
    62 -> 64 [label = "T" color="blue"];        // T
        64 -> 65 [label = "T" color="blue"];    // T
            65 -> 103;
        64 -> "67~68" [label = "F" color="red"]; // F
            "67~68" -> 69;
                69 -> 70 [label = "T" color="blue"]; // T
                    70 -> Err;
                69 -> 72 [label = "F" color="red"]; // F
                    72 -> 103;


    //is this month February? we need to check for leap years and such
    62 -> 77;
    77 -> 79 [label = "T" color="blue"];   // T
        79 -> 80 [label = "T" color="blue"];   //T
            80 -> 103;
        79 -> 82 [label = "F" color="red"];  // F
            82 -> 83 [label = "T" color="blue"];   //T
                83 -> 84 [label = "T" color="blue"];   // T
                    84 -> 103;
                83 -> "86~87" [label = "F" color="red"]; //F
                    "86~87" -> 103;
            82 -> 90 [label = "F" color="red"];  //F
                90 -> 91 [label = "T" color="blue"]; //T
                    91 -> "92~93" [label = "T" color="blue"]; //T
                        "92~93" -> 103;
                    91 -> 96 [label = "F" color="red"];   //F
                        96 -> Err;
                90 -> 98 [label = "F" color="red"];   //F
                    98 -> 99 [label = "T" color="blue"];   //T
                        99 -> Err;
                    98 -> 103 [label = "F" color="red"];  // F 
                

    //return the string representing the nextDate, in the form MM/DD/YY
    103 -> End;
    Err -> End;


    // ranking
    { rank = same; 30; "33~35";}    
    { rank = same; 40; 48;}    
    // { rank = same; 50; 62;}    
    // { rank = same; 64; 77;}    
}

